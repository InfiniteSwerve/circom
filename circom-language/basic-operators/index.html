<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="http://127.0.0.1:8000/circom-language/basic-operators/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Basic Operators - Circom 2 Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Basic Operators";
    var mkdocs_page_input_path = "circom-language/basic-operators.md";
    var mkdocs_page_url = "/circom-language/basic-operators/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Circom 2 Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <p class="caption"><span class="caption-text">Getting started</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../getting-started/background/">Background on ZK</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../getting-started/installation/">Installation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../getting-started/writing-compiling-circuits/">Writing and compiling circuits</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../getting-started/computing-the-witness/">Computing the witness</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../getting-started/proving-circuits/">Proving circuits with ZK</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">The circom Language</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="#">Signals</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../signals/">Signals</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../variables-and-mutability/">Variables & Mutability</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Templates</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../templates-and-components/">Templates & Components</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../pragma/">Pragma</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../functions/">Functions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../include/">Include</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../the-main-component/">The main Component</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Syntax</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../comment-lines/">Comment Lines</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../identifiers/">Identifiers</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reserved-keywords/">Reserved-keywords</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Basic Operators</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#field-elements">Field Elements</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#conditional-expressions">Conditional expressions</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#boolean-operators">Boolean operators</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#relational-operators">Relational operators</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#arithmetic-operators">Arithmetic operators</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#bitwise-operators">Bitwise operators</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#examples-using-operators-from-the-circom-library">Examples using operators from the circom library</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../constraint-generation/">Constraint Generation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../control-flow/">Control Flow</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../data-types/">Data Types</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../scoping/">Scoping</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Code Quality</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../code-quality/code-assertion/">Code Assertion</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../code-quality/debugging-operations/">Debugging Operations</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Circom Insight</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../circom-insight/circom-phases/">Compiler Phases</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../circom-insight/compiler-messages/">Compiler Messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../circom-insight/unknowns/">Unknowns</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../circom-insight/circom-library/">Circom Library</a>
                </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Circom 2 Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>The circom Language &raquo;</li>
        
      
    
    <li>Basic Operators</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="basic-operators">Basic Operators</h1>
<p>Circom provides boolean, arithmetic, and bitwise operators. They have the standard semantics but the arithmetic operators applied to numeric values work modulo p. </p>
<p>The precedence and association of the operators are like in Rust (defined <a href="https://doc.rust-lang.org/1.22.1/reference/expressions/operator-expr.html#operator-precedence">here</a>).</p>
<p>Expressions can be built using the next operators, but the conditional operator <code>?_:_</code> can only occur at the top level. </p>
<h2 id="field-elements">Field Elements</h2>
<p>A field element is a value in the domain of Z/pZ, where p is the prime number set by default to </p>
<p><code>p = 21888242871839275222246405745257275088548364400416034343698204186575808495617.</code></p>
<p>As such, field elements are operated in arithmetic modulo p.</p>
<p>The circom language is parametric to this number, and it can be changed without affecting the rest of the language (using <code>GLOBAL_FIELD_P</code>).</p>
<h2 id="conditional-expressions">Conditional expressions</h2>
<p><strong>Boolean_condition ? true_value : false_value</strong></p>
<pre><code class="language-text">var z = x&gt;y? x : y;
</code></pre>
<p>This conditional expression is not allowed in a nested form, hence can only be used at the top level.  </p>
<h2 id="boolean-operators">Boolean operators</h2>
<p>Next boolean operators are allowed:</p>
<table>
<thead>
<tr>
<th align="left">Operator</th>
<th align="left">Example</th>
<th align="left">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">&amp;&amp;</td>
<td align="left">a &amp;&amp; b</td>
<td align="left">Boolean operator AND</td>
</tr>
<tr>
<td align="left">||</td>
<td align="left">a || b</td>
<td align="left">Boolean operator OR</td>
</tr>
<tr>
<td align="left">!</td>
<td align="left">! a</td>
<td align="left">Boolean operator NEGATION</td>
</tr>
</tbody>
</table>
<h2 id="relational-operators">Relational operators</h2>
<p>The definition of relational operators <strong><code>&lt; , &gt; , &lt;= , &gt;= , == , !=</code></strong>  depends on the mathematical function <code>val(x)</code> which is defined as follows:         </p>
<pre><code>       val(z) = z-p  if p/2 +1 &lt;= z &lt; p

       val(z) = z,    otherwise.
</code></pre>
<p>According to this function, the definition of the relational operators is as follows:</p>
<pre><code>`x &lt; y` is defined as val(x % p) &lt; val(y % p)

`x &gt; y` is defined as val(x % p) &gt; val(y % p)

`x &lt;= y` is defined as val(x % p) &lt;= val(y % p)

`x &gt;= y` is defined as val(x % p) &gt;= val(y % p)
</code></pre>
<p>where <code>&lt;, &gt;, &lt;=, &gt;=</code> are the comparison of integers.</p>
<h2 id="arithmetic-operators">Arithmetic operators</h2>
<p>All arithmetic operations work modulo p. We have the next operators:</p>
<table>
<thead>
<tr>
<th align="center">Operator</th>
<th align="center">Example</th>
<th align="center">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">+</td>
<td align="center">a + b</td>
<td align="center">Arithmetic addition modulo p</td>
</tr>
<tr>
<td align="center">-</td>
<td align="center">a - b</td>
<td align="center">Arithmetic subtraction modulo p</td>
</tr>
<tr>
<td align="center">*</td>
<td align="center">a * b</td>
<td align="center">Arithmetic multiplication modulo p</td>
</tr>
<tr>
<td align="center">**</td>
<td align="center">a ** b</td>
<td align="center">Power modulo p</td>
</tr>
<tr>
<td align="center">/</td>
<td align="center">a / b</td>
<td align="center">Multiplication by the inverse modulo p</td>
</tr>
<tr>
<td align="center">\</td>
<td align="center">a \ b</td>
<td align="center">Quotient of the integer division</td>
</tr>
<tr>
<td align="center">%</td>
<td align="center">a % b</td>
<td align="center">Remainder of the integer division</td>
</tr>
</tbody>
</table>
<p>There are operators that combine arithmetic operators with a final assignment.</p>
<table>
<thead>
<tr>
<th align="center">Operator</th>
<th align="center">Example</th>
<th align="center">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">+=</td>
<td align="center">a += b</td>
<td align="center">Arithmetic addition modulo p and assignment</td>
</tr>
<tr>
<td align="center">-=</td>
<td align="center">a -= b</td>
<td align="center">Arithmetic subtraction modulo p and assignment</td>
</tr>
<tr>
<td align="center">*=</td>
<td align="center">a *= b</td>
<td align="center">Arithmetic multiplication modulo p and assignment</td>
</tr>
<tr>
<td align="center">**=</td>
<td align="center">a ** b</td>
<td align="center">Power modulo p and assignment</td>
</tr>
<tr>
<td align="center">/=</td>
<td align="center">a /= b</td>
<td align="center">Multiplication by the inverse modulo p and assignment</td>
</tr>
<tr>
<td align="center">\=</td>
<td align="center">a \= b</td>
<td align="center">Quotient of the integer division and assignment</td>
</tr>
<tr>
<td align="center">%=</td>
<td align="center">a %= b</td>
<td align="center">Remainder of the integer division and assignment</td>
</tr>
<tr>
<td align="center">++</td>
<td align="center">a++</td>
<td align="center">Unit increment. Syntactic sugar for a += 1</td>
</tr>
<tr>
<td align="center">--</td>
<td align="center">a--</td>
<td align="center">Unit decrement. Syntactic sugar for a -= 1</td>
</tr>
</tbody>
</table>
<h2 id="bitwise-operators">Bitwise operators</h2>
<p>All bitwise operators are performed modulo p.</p>
<table>
<thead>
<tr>
<th align="left">Operator</th>
<th align="left">Example</th>
<th align="left">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">&amp;</td>
<td align="left">a &amp; b</td>
<td align="left">Bitwise AND</td>
</tr>
<tr>
<td align="left">|</td>
<td align="left">a | b</td>
<td align="left">Bitwise OR</td>
</tr>
<tr>
<td align="left">~</td>
<td align="left">~a</td>
<td align="left">Complement 254 bits</td>
</tr>
<tr>
<td align="left">^</td>
<td align="left">a ^ b</td>
<td align="left">XOR  254 bits</td>
</tr>
<tr>
<td align="left">&gt;&gt;</td>
<td align="left">a &gt;&gt; 4</td>
<td align="left">Right shift operator</td>
</tr>
<tr>
<td align="left">&lt;&lt;</td>
<td align="left">a &lt;&lt; 4</td>
<td align="left">Left shift operator</td>
</tr>
</tbody>
</table>
<p>The shift operations also work modulo p and are defined as follows (assuming p&gt;=7). </p>
<p>For all <code>k</code> with <code>0=&lt; k &lt;= p/2</code> (integer division) we have that </p>
<ul>
<li><code>x &gt;&gt; k = x/(2**k)</code> </li>
<li><code>x &lt;&lt; k = (x*(2{**}k)~ &amp; ~mask) % p</code> </li>
</ul>
<p>where b is the number of significant bits of p and mask is <code>2{**}b - 1</code>.</p>
<p>For all <code>k</code> with <code>p/2 +1&lt;= k &lt; p</code> we have that</p>
<ul>
<li><code>x &gt;&gt; k = x &lt;&lt; (p-k)</code> </li>
<li><code>x &lt;&lt; k = x &gt;&gt; (p-k)</code> </li>
</ul>
<p>note that <code>k</code> is also the negative number <code>k-p</code>.</p>
<p>There are operators that combine bitwise operators with a final assignment.</p>
<table>
<thead>
<tr>
<th align="left">Operator</th>
<th align="left">Example</th>
<th align="left">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">&amp;=</td>
<td align="left">a &amp;= b</td>
<td align="left">Bitwise AND and assignment</td>
</tr>
<tr>
<td align="left">|=</td>
<td align="left">a |= b</td>
<td align="left">Bitwise OR and assignment</td>
</tr>
<tr>
<td align="left">~=</td>
<td align="left">~=a</td>
<td align="left">Complement 254 bits and assignment</td>
</tr>
<tr>
<td align="left">^=</td>
<td align="left">a ^= b</td>
<td align="left">XOR  254 bits and assignment</td>
</tr>
<tr>
<td align="left">&gt;&gt;=</td>
<td align="left">a &gt;&gt;= 4</td>
<td align="left">Right shift operator and assignment</td>
</tr>
<tr>
<td align="left">&lt;&lt;=</td>
<td align="left">a &lt;&lt;= 4</td>
<td align="left">Left shift operator and assignment</td>
</tr>
</tbody>
</table>
<h2 id="examples-using-operators-from-the-circom-library">Examples using operators from the circom library</h2>
<p>In the following, there are several examples using combinations of the previous operators.</p>
<pre><code class="language-text">pragma circom 2.0.0;

template IsZero() {
    signal input in;
    signal output out;
    signal inv;
    inv &lt;-- in!=0 ? 1/in : 0;
    out &lt;== -in*inv +1;
    in*out === 0;
}

component main {public [in]}= IsZero();
</code></pre>
<p>This template checks if the input signal <code>in</code> is <code>0</code>. In case it is, the value of output signal<code>out</code> is <code>1</code>. <code>0</code>, otherwise. Note here that we use the intermediate signal <code>inv</code> to compute the inverse of the value of <code>in</code> or <code>0</code> if it does not exist. If <code>in</code>is 0, then <code>in*inv</code> is 0, and the value of <code>out</code> is <code>1</code>. Otherwise, <code>in*inv</code> is always <code>1</code>, then <code>out</code> is <code>0</code>.</p>
<pre><code class="language-text">pragma circom 2.0.0;

template Num2Bits(n) {
    signal input in;
    signal output out[n];
    var lc1=0;
    var e2=1;
    for (var i = 0; i&lt;n; i++) {
        out[i] &lt;-- (in &gt;&gt; i) &amp; 1;
        out[i] * (out[i] -1 ) === 0;
        lc1 += out[i] * e2;
        e2 = e2+e2;
    }
    lc1 === in;
}

component main {public [in]}= Num2Bits(3);
</code></pre>
<p>This templates returns a n-dimensional array with the value of <code>in</code> in binary. Line 7 uses the right shift <code>&gt;&gt;</code> and operator <code>&amp;</code> to obtain at each iteration the <code>i</code> component of the array. Finally, line 12 adds the constraint <code>lc1 = in</code> to guarantee  that the conversion is well done.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../constraint-generation/" class="btn btn-neutral float-right" title="Constraint Generation">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../reserved-keywords/" class="btn btn-neutral" title="Reserved-keywords"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../reserved-keywords/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../constraint-generation/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
